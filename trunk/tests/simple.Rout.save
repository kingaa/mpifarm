
R version 2.8.1 (2008-12-22)
Copyright (C) 2008 The R Foundation for Statistical Computing
ISBN 3-900051-07-0

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> require(Rmpi)
Loading required package: Rmpi
> mpi.spawn.Rslaves(needlog=T)
	10 slaves are spawned successfully. 0 failed.
master  (rank 0 , comm 1) of size 11 is running on: quercus 
slave1  (rank 1 , comm 1) of size 11 is running on: quercus 
slave2  (rank 2 , comm 1) of size 11 is running on: quercus 
slave3  (rank 3 , comm 1) of size 11 is running on: quercus 
slave4  (rank 4 , comm 1) of size 11 is running on: quercus 
slave5  (rank 5 , comm 1) of size 11 is running on: quercus 
slave6  (rank 6 , comm 1) of size 11 is running on: quercus 
slave7  (rank 7 , comm 1) of size 11 is running on: quercus 
slave8  (rank 8 , comm 1) of size 11 is running on: quercus 
slave9  (rank 9 , comm 1) of size 11 is running on: quercus 
slave10 (rank 10, comm 1) of size 11 is running on: quercus 
> require(mpifarm)
Loading required package: mpifarm
Loading required package: pomp
Loading required package: deSolve
Loading required package: subplex
> nslave <- mpi.comm.size()-1
> nper <- 50
> nrand <- 1000
> njobs <- nper*nslave
> seeds <- ceiling(runif(njobs,0,2^31))
> job.list <- lapply(seeds,function(x)list(seed=x))
> tic <- Sys.time()
> job.result <- mpi.farm(
+ 	               {
+                          save.seed <- .Random.seed
+                          set.seed(seed)
+                          tic <- Sys.time()
+                          x <- rnorm(n)
+                          toc <- Sys.time()
+                          .Random.seed <<- save.seed
+                          me <- mpi.comm.rank()
+                          c(slave=me,time=toc-tic,mean=mean(x),sd=sd(x),n=length(x))
+                        },
+                        job.list,
+                        common=list(n=nrand),
+                        info=FALSE
+                        )
> toc <- Sys.time()
> x <- do.call(rbind,job.result)
> print(toc-tic)
Time difference of 3.696839 secs
> warnings()
NULL
> mpi.close.Rslaves()
[1] 1
> mpi.quit()
